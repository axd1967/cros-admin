<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>js\components\ManualControl.js - The cros-admin API</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="The cros-admin API" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/CustomAdapter.html">CustomAdapter</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/cros-admin.html">cros-admin</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: js\components\ManualControl.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * Created by matthias on 25/04/2015.
 */

App.Keyboard = Ember.Object.create({

    listeners : {},

    registerListener : function(keycode, id, handler, releaseHandler) {
        var arr = this.get(&quot;listeners&quot;)[keycode] || [];
        arr.pushObject({id : id, handler: handler, releaseHandler: releaseHandler});
        this.get(&quot;listeners&quot;)[keycode] = arr;
    },

    unregisterListener : function(keycode, id) {
        if (keycode) {
            var arr = this.get(&quot;listeners&quot;)[keycode].filter(function(handlerObj) {return handlerObj.id === id;});
            if (arr.length &gt; 0) {
                this.get(&quot;listeners&quot;)[keycode].removeObject(arr[0]);
            }
        }
    },

    handler : function(event) {
        var keyPressed = String.fromCharCode(event.keyCode);

        var handlers = this.get(&quot;listeners&quot;)[keyPressed] || [];
        $.each(handlers, function() {
            if (this.handler)
                this.handler();
        });
    },

    release : function(event) {
        var keyPressed = String.fromCharCode(event.keyCode);

        var handlers = this.get(&quot;listeners&quot;)[keyPressed] || [];
        $.each(handlers, function() {
            if (this.releaseHandler)
                this.releaseHandler();
        });
    },

    init : function() {
        var self = this;
        document.addEventListener(&quot;keydown&quot;, function(event) {self.handler(event);}, false);
        document.addEventListener(&quot;keyup&quot;, function(event) {self.release(event);}, false);
    }

});


App.ManualControlComponent = Ember.Component.extend({

    tagName: &#x27;a&#x27;,
    classNames : [&quot;btn&quot;, &quot;btn-default&quot;],
    attributeBindings: [&#x27;type&#x27;],
    href: &quot;button&quot;,
    action : &quot;click&quot;,

    title : &quot;&quot;,
    command : &quot;&quot;,
    key : null,

    didInsertElement : function() {
        var self = this;
        this.$().on(&#x27;click&#x27;, function() {
            self.send(&quot;click&quot;);
        });

        if (this.get(&quot;key&quot;)) {
            App.Keyboard.registerListener(this.get(&quot;key&quot;), &quot;control-&quot;+this.get(&quot;key&quot;), function() {
                self.$().addClass(&quot;controlButtonActive&quot;);
                self.send(&quot;click&quot;);
            }, function() {
                self.$().removeClass(&quot;controlButtonActive&quot;);
            });
        }
    },

    willDestroyElement : function() {
        App.Keyboard.unregisterListener(this.get(&quot;key&quot;), &quot;control-&quot;+this.get(&quot;key&quot;));
    },

    actions: {
        click : function() {
            var self = this;
            var params = {data: {speed: parseFloat($(&quot;#speed&quot;).val())}};
            this.adapter.find(&quot;drone&quot;,this.get(&quot;currentId&quot;), [&quot;commands&quot;, this.get(&quot;command&quot;)], params).then(function() {
                self.set(&quot;error&quot;, &quot;&quot;);
            }).fail(function(data) {
                if (typeof data.responseJSON === &quot;string&quot;)
                    self.set(&quot;error&quot;, data.responseJSON);
                else
                    self.set(&quot;error&quot;, data.responseJSON.reason);
            });
        }
    }

});
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
