<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>js\components\tableController.js - The cros-admin API</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="The cros-admin API" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/.CustomAdapter.html">.CustomAdapter</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: js\components\tableController.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
App.MyTableComponent = Ember.Component.extend({

    /*****************************Paging*****************************/
    DEFAULT: 10, //do not change
    page: 1,
    perPage: 10,
    nrOfElements: [],

    initialize: function(){
        var pageSize = this.get(&#x27;DEFAULT&#x27;);
        if(this.get(&#x27;perPage&#x27;)){
            pageSize = this.get(&#x27;perPage&#x27;);
        }
        this.sendAction(&#x27;action&#x27;, this.get(&#x27;keyword&#x27;), this.get(&#x27;searchField&#x27;), this.get(&#x27;page&#x27;), pageSize);
        this.initSelect();
    }.on(&quot;init&quot;),

    initSelect: function () {
        var list = [{label: &quot;10&quot;, value: 10},
            {label: &quot;20&quot;, value: 20},
            {label: &quot;50&quot;, value: 50},
            {label: &quot;all&quot;, value: &quot;all&quot;}];
        /*var all = {label: &quot;all&quot;};
        all[&#x27;value&#x27;] = this.get(&#x27;length&#x27;);
        list.addObject(all);*/
        this.set(&#x27;nrOfElements&#x27;, list);
    },

    isEmpty: function(){
        return this.get(&#x27;length&#x27;) == 0;
    }.property(&#x27;length&#x27;),

    begin: function(){
        var perPage = 2;
        if(this.get(&#x27;perPage&#x27;)){
            perPage = this.get(&#x27;perPage&#x27;);
        }
        return ((this.get(&#x27;page&#x27;) - 1) * perPage)+1;
    }.property(&#x27;page&#x27;, &#x27;perPage&#x27;),

    end: function(){
        var perPage = 10;
        if(this.get(&#x27;perPage&#x27;)){
            perPage = this.get(&#x27;perPage&#x27;);
        }
        var max = ((this.get(&#x27;page&#x27;) * perPage)-1)+1;
        if(max &gt; this.get(&#x27;length&#x27;)){
            return this.get(&#x27;length&#x27;);
        }
        return max;
    }.property(&#x27;page&#x27;, &#x27;perPage&#x27;),

    //calculate totalpages
    totalPages: function() {
        if (this.get(&#x27;perPage&#x27;)) {
            return Math.ceil(this.get(&#x27;length&#x27;) / this.get(&#x27;perPage&#x27;));
        }
        else{
            return Math.ceil(this.get(&#x27;length&#x27;) / this.get(&#x27;DEFAULT&#x27;)); //default!
        }
    }.property(&#x27;length&#x27;, &#x27;perPage&#x27;),

    //get collection with page numbers
    pages: function() {
        var collection = Ember.A();//list with numbers

        for(var i = 0; i &lt; this.get(&#x27;totalPages&#x27;); i++) {
            collection.pushObject(Ember.Object.create({
                number: i + 1
            }));
        }

        return collection;
    }.property(&#x27;totalPages&#x27;),

    //are there pages?
    hasPages: (function() {
        if(this.get(&#x27;perPage&#x27;) == &quot;all&quot;)
            return false;
        else
            return this.get(&#x27;totalPages&#x27;) &gt; 1;
    }).observes(&#x27;length&#x27;).property(&#x27;totalPages&#x27;),

    //function to get the previous page
    prevPage: (function() {
        var page = this.get(&#x27;page&#x27;);
        var totalPages = this.get(&#x27;totalPages&#x27;);

        if(page &gt; 1 &amp;&amp; totalPages &gt; 1) {
            return page - 1;
        } else {
            return null;
        }
    }).property(&#x27;page&#x27;, &#x27;totalPages&#x27;),

    //function to get the next page
    nextPage: (function() {
        var page = this.get(&#x27;page&#x27;);
        var totalPages = this.get(&#x27;totalPages&#x27;);

        if(page &lt; totalPages &amp;&amp; totalPages &gt; 1) {
            return page + 1;
        } else {
            return null;
        }
    }).property(&#x27;page&#x27;, &#x27;totalPages&#x27;),

    paginatedContent: (function() {
        var start = (this.get(&#x27;page&#x27;) - 1) * this.get(&#x27;perPage&#x27;);
        var end = start + this.get(&#x27;perPage&#x27;);

        return this.get(&#x27;arrangedContent&#x27;).slice(start, end);
    }).property(&#x27;page&#x27;, &#x27;totalPages&#x27;, &#x27;arrangedContent.[]&#x27;),

    onPerPageChange:function(){
        //reset page to 1
        this.set(&#x27;page&#x27;, 1);
        var search = document.getElementById(&quot;searchbox&quot;).value;
        this.sendAction(&#x27;action&#x27;, search, this.get(&#x27;searchField&#x27;), this.get(&#x27;page&#x27;), this.get(&#x27;perPage&#x27;));
    }.observes(&#x27;perPage&#x27;),
    /*****************************Sorting*****************************/

    orderBy: &quot;id&quot;,
    order: &quot;asc&quot;,

    /*****************************Searching*****************************/

    keyword: null,
    searchField: null,

    /*****************************Actions*****************************/
    actions: {
        selectPage: function (number) {
            var search = this.get(&#x27;keyword&#x27;);
            this.set(&#x27;page&#x27;, number);
            this.sendAction(&#x27;action&#x27;, search, this.get(&#x27;searchField&#x27;), this.get(&#x27;page&#x27;), this.get(&#x27;perPage&#x27;), this.get(&#x27;orderBy&#x27;), this.get(&#x27;order&#x27;));
        },

        search: function(string){
            //reset page to 1
            this.set(&#x27;page&#x27;, 1);
            //send search
            this.sendAction(&#x27;action&#x27;, string, this.get(&#x27;searchField&#x27;), this.get(&#x27;page&#x27;), this.get(&#x27;perPage&#x27;), this.get(&#x27;orderBy&#x27;), this.get(&#x27;order&#x27;));
        },

        sort: function(column){
            var order = this.get(&#x27;order&#x27;);
            if(this.get(&#x27;orderBy&#x27;) == column){
                if(order &amp;&amp; order == &#x27;asc&#x27;){
                    order = &#x27;desc&#x27;;
                }else{
                    order = &#x27;asc&#x27;
                }
            }else{
                order = &#x27;asc&#x27;
            }
            //set new values
            this.set(&#x27;orderBy&#x27;, column);
            this.set(&#x27;order&#x27;, order);
            //send request
            this.sendAction(&#x27;action&#x27;, this.get(&#x27;keyword&#x27;), this.get(&#x27;searchField&#x27;), this.get(&#x27;page&#x27;), this.get(&#x27;perPage&#x27;), this.get(&#x27;orderBy&#x27;), this.get(&#x27;order&#x27;));
        }
    }
});

App.PageController = Ember.ObjectController.extend({
    currentPage: Ember.computed.alias(&#x27;parentController.page&#x27;),

    active: (function() {
        return this.get(&#x27;number&#x27;) === this.get(&#x27;currentPage&#x27;);
    }).property(&#x27;number&#x27;, &#x27;currentPage&#x27;)
});

App.ColumnController = Ember.ObjectController.extend({

    orderBy: Ember.computed.alias(&#x27;parentController.orderBy&#x27;),
    order: Ember.computed.alias(&#x27;parentController.order&#x27;),

    getIconClass: (function(){
        console.log(&quot;changed&quot;);
        var icon = &quot;fa &quot;
        if(this.get(&#x27;value&#x27;) == this.get(&#x27;orderBy&#x27;)){
            if(this.get(&#x27;order&#x27;) == &#x27;desc&#x27;){
                icon += &quot;fa-sort-desc&quot;
            }else{
                icon += &quot;fa-sort-asc&quot;
            }
        }else{
            icon += &quot;fa-sort&quot;
        }
        return icon
    }).property(&#x27;value&#x27;, &#x27;orderBy&#x27;, &#x27;order&#x27;)
});
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
